\begin{figure}
\pgfplotsset{width=0.65\textwidth,height=0.65\textwidth}
\centering
\begin{tikzpicture}
\begin{axis}[
	xlabel={Occupancy PGO},
	ylabel={Occupancy PGO with removed blocks\\more is better {\color{tumblue}$\blacktriangleright$}},
	ylabel style={align=center},
	point meta min=0,
	grid=both,
	enlargelimits=false,
	colorbar,
	colorbar style={
		ylabel={\#Shaders},
	},
	nodes near coords={\pgfmathprintnumber\pgfplotspointmeta},
	node near coords style={
		/utils/exec={\setbox0\hbox{\pgfmathprintnumber\pgfplotspointmeta}
		\pgfmathfloattomacro{\pgfplotspointmeta}{\F}{\M}{\E}
		\pgfmathsetmacro{\mycolor}{ifthenelse(\M*pow(10,\E)<100,"white","black")}
		},
		yshift=-7pt, color=\mycolor},
]

\runtex{register-occupancy}
\end{axis}
\end{tikzpicture}
\captionof{figure}{Occupancy based on vector register usage, when removing blocks}
\label{dia:registers_occupancy}
\end{figure}
